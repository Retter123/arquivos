; Sistema Gui
#SingleInstance, force
If (FileExist(A_ScriptDir . "/hotkeyhp.txt"))
{
	FileRead, corhpsalva, %A_ScriptDir%/corhpsalva.txt
	FileRead, hpx, %A_ScriptDir%/hpx.txt
	FileRead, hpy, %A_ScriptDir%/hpy.txt
	FileRead, hotkeyhp, %A_ScriptDir%/hotkeyhp.txt
}
If (FileExist(A_ScriptDir . "/hotkeymp.txt"))
{
	FileRead, cormpsalva, %A_ScriptDir%/cormpsalva.txt
	FileRead, mpx, %A_ScriptDir%/mpx.txt
	FileRead, mpy, %A_ScriptDir%/mpy.txt
	FileRead, hotkeymp, %A_ScriptDir%/hotkeymp.txt
}
If (FileExist(A_ScriptDir . "/hotkeysenzu.txt"))
{
	FileRead, corsenzusalva, %A_ScriptDir%/corsenzusalva.txt
	FileRead, senzux, %A_ScriptDir%/senzux.txt
	FileRead, senzuy, %A_ScriptDir%/senzuy.txt
	FileRead, hotkeysenzu, %A_ScriptDir%/hotkeysenzu.txt
}
If (FileExist(A_ScriptDir . "/hotkeyalvo.txt"))
{
	FileRead, coralvosalvo, %A_ScriptDir%/coralvosalvo.txt
	FileRead, alvox, %A_ScriptDir%/alvox.txt
	FileRead, alvoy, %A_ScriptDir%/alvoy.txt
	FileRead, hotkeyalvo, %A_ScriptDir%/hotkeyalvo.txt
}
If (FileExist(A_ScriptDir . "/xin.txt"))
{
	FileRead, xin, %A_ScriptDir%/xin.txt
	FileRead, yin, %A_ScriptDir%/yin.txt
	FileRead, xfi, %A_ScriptDir%/xfi.txt
	FileRead, yfi, %A_ScriptDir%/yfi.txt
}
If (FileExist(A_ScriptDir . "/hotkeytarget.txt"))
{
	FileRead, hotkeytarget, %A_ScriptDir%/hotkeytarget.txt
	FileRead, combotecla, %A_ScriptDir%/combotecla.txt
}
If (FileExist(A_ScriptDir . "/xcord.txt"))
{
	FileRead, xcord, %A_ScriptDir%/xcord.txt
	FileRead, ycord, %A_ScriptDir%/ycord.txt
} else
{
	xcord = center
	ycord = center
}
Gui, +Alwaysontop
Gui, Show, x%xcord% y%ycord% w280 h80 , Ajudante por Iago
Gui, Add, Button, x10 y10 h20 w50 gHP, Vida
Gui, Add, Button, x60 y10 h20 w50 gMP, Mana
Gui, Add, Button, x10 y30 h20 w100 gativarhpmp, Ativar Healing
Gui, Add, Button, x10 y55 h20 w50 gsenzu, Senzu
Gui, Add, Button, x110 y10 h20 w50 gAlvo, Target
Gui, Add, Button, x160 y10 h20 w50 gAtacar, Combo
Gui, Add, Button, x220 y10 h20 w52 gativar, Ativar
Gui, Add, Button, x220 y30 h20 w52 greload, Desativar
Gui, Add, Button, x160 y55 h20 w50 gtutorial, Tutorial
Gui, Add, Button, x220 y55 h20 w52 gcreditos, Créditos
return

; Label de cura
HP:
	KeyWait, LButton, D
	MouseGetPos, X, Y
	FileDelete, %A_ScriptDir%/hpx.txt
	FileDelete, %A_ScriptDir%/hpy.txt
	FileDelete, %A_ScriptDir%/corhpsalva.txt
	PixelGetColor, cor, %x%, %y%
	FileAppend, %cor%, %A_ScriptDir%/corhpsalva.txt
	FileAppend, %X%, %A_ScriptDir%/hpx.txt
	FileAppend, %Y%, %A_ScriptDir%/hpy.txt
	Gui, Add, Text, x10 y85, Escolha a Hotkey de cura
	Gui, Add, Hotkey, vUserChosenKeyhp
	Gui, Add, Button, x10 y125 gButtonSaveHP, SaveHP
	Gui, Show, w280 h155
return

MP:
	KeyWait, LButton, D
	MouseGetPos, X, Y
	FileDelete, %A_ScriptDir%/mpx.txt
	FileDelete, %A_ScriptDir%/mpy.txt
	FileDelete, %A_ScriptDir%/cormpsalva.txt
	PixelGetColor, cor, %x%, %y%
	FileAppend, %cor%, %A_ScriptDir%/cormpsalva.txt
	FileAppend, %X%, %A_ScriptDir%/mpx.txt
	FileAppend, %Y%, %A_ScriptDir%/mpy.txt
	Gui, Add, Text, x10 y85, Escolha a Hotkey de mana
	Gui, Add, Hotkey, vUserChosenKeymp
	Gui, Add, Button, x10 y125 gButtonSaveMP, SaveMP
	Gui, Show, w280 h155
return

senzu:
	KeyWait, LButton, D
	MouseGetPos, X, Y
	FileDelete, %A_ScriptDir%/senzux.txt
	FileDelete, %A_ScriptDir%/senzuy.txt
	FileDelete, %A_ScriptDir%/corsenzusalva.txt
	PixelGetColor, cor, %x%, %y%
	FileAppend, %cor%, %A_ScriptDir%/corsenzusalva.txt
	FileAppend, %X%, %A_ScriptDir%/senzux.txt
	FileAppend, %Y%, %A_ScriptDir%/senzuy.txt
	Gui, Add, Text, x10 y85, Escolha a Hotkey da senzu
	Gui, Add, Hotkey, vUserChosenKeysenzu
	Gui, Add, Button, x10 y125 gButtonSaveSenzu, SaveSenzu
	Gui, Show, w280 h155
return

ButtonSaveHP:
   Gui, Submit
   FileDelete, %A_ScriptDir%/hotkeyhp.txt
   FileAppend, %UserChosenKeyhp%, %A_ScriptDir%/hotkeyhp.txt
   Reload
return

ButtonSaveMP:
   Gui, Submit
   FileDelete, %A_ScriptDir%/hotkeymp.txt
   FileAppend, %UserChosenKeymp%, %A_ScriptDir%/hotkeymp.txt
   Reload
return

ButtonSaveSenzu:
   Gui, Submit
   FileDelete, %A_ScriptDir%/hotkeysenzu.txt
   FileAppend, %UserChosenKeysenzu%, %A_ScriptDir%/hotkeysenzu.txt
   Reload
return

; Label de ataque
Alvo:
	FileDelete, %A_ScriptDir%/xin.txt
	FileDelete, %A_ScriptDir%/yin.txt
	FileDelete, %A_ScriptDir%/xfi.txt
	FileDelete, %A_ScriptDir%/yfi.txt
	KeyWait, LButton, D
	MouseGetPos, xin, yin
	FileAppend, %xin%, %A_ScriptDir%/xin.txt
	FileAppend, %yin%, %A_ScriptDir%/yin.txt
	Sleep, 100
	KeyWait, LButton, D
	MouseGetPos, xfi, yfi
	FileAppend, %xfi%, %A_ScriptDir%/xfi.txt
	FileAppend, %yfi%, %A_ScriptDir%/yfi.txt
	Gui, Add, Text, x10 y85, Escolha a Hotkey de target
	Gui, Add, Hotkey, vUserChosenKeytarget
	Gui, Add, Button, x10 y125 gButtonSaveTarget, SaveTarget
	Gui, Show, w280 h155
return

ButtonSaveTarget:
   Gui, Submit
   FileDelete, %A_ScriptDir%/hotkeytarget.txt
   FileAppend, %UserChosenKeytarget%, %A_ScriptDir%/hotkeytarget.txt
   Reload
return

Atacar:
	FileDelete, %A_ScriptDir%/combotecla.txt
	Gui, Add, Text, x10 y85, Escolha a Hotkey de combo
	Gui, Add, Hotkey, vUserChosenKeycombo
	Gui, Add, Button, x10 y125 gButtonSaveCombo, SaveCombo
	Gui, Show, w280 h155
return

ButtonSaveCombo:
   Gui, Submit
   FileDelete, %A_ScriptDir%/combotecla.txt
   FileAppend, %UserChosenKeycombo%, %A_ScriptDir%/combotecla.txt
   Reload
return

;Desativar
reload:
	FileDelete, %A_ScriptDir%/xcord.txt
	FileDelete, %A_ScriptDir%/ycord.txt
	WinGetPos, xcord, ycord
	FileAppend, %xcord%, %A_ScriptDir%/xcord.txt
	FileAppend, %ycord%, %A_ScriptDir%/ycord.txt
Reload
return


;Tutorial + Créditos

tutorial:
run C:\Windows\Notepad.exe "%A_ScriptDir%/Tutorial.txt"
return

creditos:
	MsgBox, 4096, Créditos, Feito por Iaguinho. Discord: Retter#1608
return

; Funções
ativar:
If WinActive("ahk_class rots")
{
PixelGetColor, corhp, %hpx%, %hpy%
if (corhp = corhpsalva)
{
	ControlSend, , {blind}%hotkeyhp%, Return Of The Saiyans
	Sleep, 100
}
PixelGetColor, corsenzu, %senzux%, %senzuy%
if (corsenzu = corsenzusalva)
{
	ControlSend, , {blind}%hotkeysenzu%, Return Of The Saiyans
	Sleep, 100
}
PixelGetColor, cormp, %mpx%, %mpy%
if (cormp = cormpsalva)
{
	ControlSend, , {blind}%hotkeymp%, Return Of The Saiyans
	Sleep, 100
}
PixelSearch, Px, Py, %xin%, %yin%, %xfi%, %yfi%, 0xFF0000, 1, Fast RGB
if (ErrorLevel = 0)
{
    controlsend, , {blind}{%combotecla%}, Return Of The Saiyans
}
else
{
    controlsend, , {blind}{%hotkeytarget%}, Return Of The Saiyans
	Sleep, 100
}
}
goto, ativar
return

ativarhpmp:
If WinActive("ahk_class rots")
{
PixelGetColor, corhp, %hpx%, %hpy%
if (corhp = corhpsalva)
{
	ControlSend, , {blind}%hotkeyhp%, Return Of The Saiyans
	Sleep, 100
}
PixelGetColor, corsenzu, %senzux%, %senzuy%
if (corsenzu = corsenzusalva)
{
	ControlSend, , {blind}%hotkeysenzu%, Return Of The Saiyans
	Sleep, 100
}
PixelGetColor, cormp, %mpx%, %mpy%
if (cormp = cormpsalva)
{
	ControlSend, , {blind}%hotkeymp%, Return Of The Saiyans
	Sleep, 100
}
}
goto, ativarhpmp
return

Home::Pause
GuiClose:
	FileDelete, %A_ScriptDir%/xcord.txt
	FileDelete, %A_ScriptDir%/ycord.txt
	WinGetPos, xcord, ycord
	FileAppend, %xcord%, %A_ScriptDir%/xcord.txt
	FileAppend, %ycord%, %A_ScriptDir%/ycord.txt
ExitApp
